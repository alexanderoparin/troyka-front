# üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—é TROYKA.AI

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ–∑–¥–∞–Ω—ã:

- [x] Next.js 14 –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å TypeScript
- [x] Prisma —Å—Ö–µ–º–∞ –∏ –º–∏–≥—Ä–∞—Ü–∏–∏
- [x] –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ª–µ–Ω–¥–∏–Ω–≥, —Å—Ç—É–¥–∏—è, –∏—Å—Ç–æ—Ä–∏—è, pricing, account)
- [x] NextAuth —Å email magic link –∏ Telegram Login Widget
- [x] API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏, –æ–ø–ª–∞—Ç, –≤–µ–±—Ö—É–∫–æ–≤
- [x] FAL.ai –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- [x] Robokassa –¥–ª—è –ø—Ä–∏—ë–º–∞ –ø–ª–∞—Ç–µ–∂–µ–π
- [x] S3 —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (Yandex/Timeweb)
- [x] Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ CI/CD
- [x] –ü–æ–¥—Ä–æ–±–Ω—ã–π README

## üèó –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
npm install
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
cp env.sample .env.local
```

–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

```env
NODE_ENV=development
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=your-secret-key-here
DATABASE_URL=postgresql://user:password@localhost:5432/troyka_ai

# –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–∞–≥–ª—É—à–∫–∏
FAL_API_KEY=test-key
ROBOKASSA_LOGIN=test-login
ROBOKASSA_PASSWORD_1=test-pass1
ROBOKASSA_PASSWORD_2=test-pass2
ROBOKASSA_TEST_MODE=true

S3_PROVIDER=YANDEX
S3_ENDPOINT=https://storage.yandexcloud.net
S3_ACCESS_KEY_ID=test-key
S3_SECRET_ACCESS_KEY=test-secret
S3_BUCKET=test-bucket
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Prisma Client
npx prisma generate

# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
npx prisma migrate dev --name init

# –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
npm run db:seed
```

### 4. –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
npm run dev
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É http://localhost:3000

## üéØ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:
- ‚úÖ **/** - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å hero —Å–µ–∫—Ü–∏–µ–π –∏ —Ü–µ–Ω–∞–º–∏
- ‚úÖ **/studio** - –§–æ—Ä–º–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ **/history** - –ò—Å—Ç–æ—Ä–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–π —Å –ø–æ–∏—Å–∫–æ–º
- ‚úÖ **/pricing** - –ü–ª–∞–Ω—ã –ø–æ–¥–ø–∏—Å–∫–∏ —Å Robokassa
- ‚úÖ **/account** - –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –±–∞–ª–∞–Ω—Å
- ‚úÖ **/legal** - –ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ –∏ –æ—Ñ–µ—Ä—Ç–∞

### API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:
- ‚úÖ `GET /api/health` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞
- ‚úÖ `GET /api/wallet` - –ë–∞–ª–∞–Ω—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ `POST /api/wallet/purchase` - –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞
- ‚úÖ `POST /api/generate` - –ó–∞–ø—É—Å–∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- ‚úÖ `GET /api/jobs/recent` - –ù–µ–¥–∞–≤–Ω–∏–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- ‚úÖ `GET /api/jobs/[id]` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–¥–∞—á–µ
- ‚úÖ `POST /api/upload` - –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ `POST /api/webhooks/fal` - –í–µ–±—Ö—É–∫ FAL
- ‚úÖ `POST /api/payments/robokassa/callback` - –í–µ–±—Ö—É–∫ Robokassa

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

–î–ª—è –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ:

1. **PostgreSQL** - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
2. **FAL.ai** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
3. **Robokassa** - –ø—Ä–∏—ë–º –ø–ª–∞—Ç–µ–∂–µ–π
4. **Yandex Object Storage** –∏–ª–∏ **Timeweb** - —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Ñ–∞–π–ª–æ–≤
5. **SMTP —Å–µ—Ä–≤–µ—Ä** - –¥–ª—è magic link –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
6. **Telegram Bot** - –¥–ª—è Telegram Login Widget
7. **Sentry** - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—à–∏–±–æ–∫

–ü–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ —Å–º. –≤ [README.md](README.md).

## üê≥ –î–µ–ø–ª–æ–π –≤ –ø—Ä–æ–¥–∞–∫—à–Ω

### Docker Compose

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–¥–∞–∫—à–Ω .env —Ñ–∞–π–ª
cp env.sample .env

# –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
nano .env

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker-compose up -d

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
docker-compose logs -f app
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–µ–ø–ª–æ—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
curl http://localhost:3000/api/health

# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å:
# {"ok":true,"version":"1.0.0","services":{"database":"ok",...}}
```

## üéâ –ì–æ—Ç–æ–≤–æ!

–í–∞—à MVP TROYKA.AI –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ! 

### –ß—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å:

‚úÖ **–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –≤–µ–±-—Å–∞–π—Ç** –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Ç–æ–≤–∞—Ä–æ–≤  
‚úÖ **–°–∏—Å—Ç–µ–º–∞ –ø–æ–∏–Ω—Ç–æ–≤** —Å –±–æ–Ω—É—Å–æ–º +6 –ø–æ–∏–Ω—Ç–æ–≤ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏  
‚úÖ **–ü—Ä–∏—ë–º –ø–ª–∞—Ç–µ–∂–µ–π** —á–µ—Ä–µ–∑ —Ä–æ—Å—Å–∏–π—Å–∫–∏–π Robokassa  
‚úÖ **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** —á–µ—Ä–µ–∑ FAL.ai (Nano Banana)  
‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ** –≤ —Ä–æ—Å—Å–∏–π—Å–∫–æ–º –æ–±–ª–∞–∫–µ  
‚úÖ **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω** —Å —Ç—ë–º–Ω–æ–π —Ç–µ–º–æ–π  
‚úÖ **SEO –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥  
‚úÖ **Docker –¥–µ–ø–ª–æ–π** –∏ CI/CD  

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. üåê –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–æ–º–µ–Ω **troyka-ai.ru**
2. üîê –ü–æ–ª—É—á–∏—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
3. üìä –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫—É
4. üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ä–µ–∫–ª–∞–º–Ω—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏
5. üìà –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–π—Ç–µ –ø–æ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏

**–£–¥–∞—á–∏ —Å –∑–∞–ø—É—Å–∫–æ–º!** üöÄ
