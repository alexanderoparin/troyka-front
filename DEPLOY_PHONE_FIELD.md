# üì± –î–µ–ø–ª–æ–π –ø–æ–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞ - –ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

## ‚úÖ –ß—Ç–æ –æ–±–Ω–æ–≤–ª–µ–Ω–æ:

### **Frontend (Next.js)**
- ‚úÖ `RegisterRequest` - –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `phone`
- ‚úÖ `UserInfo` - –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `phone`
- ‚úÖ –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ - –ø–æ–ª–µ –¥–ª—è –≤–≤–æ–¥–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞
- ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–∫–∫–∞—É–Ω—Ç–∞ - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–ª–µ—Ñ–æ–Ω–∞

### **Backend (Java Spring Boot)**
- ‚úÖ `User` entity - –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `phone`
- ‚úÖ `RegisterRequest` DTO - –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `phone`
- ‚úÖ `UserInfoDTO` - –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `phone`
- ‚úÖ `AuthService` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

### **Database (PostgreSQL)**
- ‚úÖ SQL —Å–∫—Ä–∏–ø—Ç –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—è `phone VARCHAR(20)`
- ‚úÖ –ò–Ω–¥–µ–∫—Å –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É

## üöÄ –ü–æ—à–∞–≥–æ–≤—ã–π –¥–µ–ø–ª–æ–π:

### 1. **–û–±–Ω–æ–≤–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ**

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh root@213.171.4.47

# –ü–µ—Ä–µ–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –±—ç–∫–µ–Ω–¥–∞
cd /opt/troyka-back

# –í—ã–ø–æ–ª–Ω–∏—Ç—å SQL –∫–æ–º–∞–Ω–¥—ã
psql -h localhost -p 5432 -d troyka -U troyka_user -c "ALTER TABLE troyka.users ADD COLUMN IF NOT EXISTS phone VARCHAR(20) NULL;"
psql -h localhost -p 5432 -d troyka -U troyka_user -c "CREATE INDEX IF NOT EXISTS idx_users_phone ON troyka.users(phone);"
```

### 2. **–û–±–Ω–æ–≤–∏—Ç—å –±—ç–∫–µ–Ω–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ**

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤ /opt/troyka-back
git pull origin main
mvn clean package -DskipTests
sudo systemctl stop troyka-back
sudo systemctl start troyka-back
sudo systemctl status troyka-back
```

### 3. **–û–±–Ω–æ–≤–∏—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ**

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤ /opt/troyka-front
git pull origin main
npm run build
sudo systemctl restart nginx
```

## üîß –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π):

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å —Å–∫—Ä–∏–ø—Ç—ã –¥–µ–ø–ª–æ—è, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏—Ö:

```bash
# –î–ª—è –±—ç–∫–µ–Ω–¥–∞
cd /opt/troyka-back
./deploy-server.sh

# –î–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞  
cd /opt/troyka-front
./deploy-frontend.sh
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ** `https://24reshai.ru/register`
2. **–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å** —Å –Ω–æ–º–µ—Ä–æ–º —Ç–µ–ª–µ—Ñ–æ–Ω–∞
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ** –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –ø—Ä–æ—Ñ–∏–ª–µ
4. **–£–±–µ–¥–∏—Ç–µ—Å—å**, —á—Ç–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –±–µ–∑ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç

## üêõ –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫:

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –±—ç–∫–µ–Ω–¥–∞:
```bash
sudo journalctl -u troyka-back -f
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ nginx:
```bash
sudo tail -f /var/log/nginx/error.log
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤:
```bash
sudo systemctl status troyka-back
sudo systemctl status nginx
```

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ–ª—è –≤ –ë–î:

```sql
-- –ü–æ–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ —Ç–∞–±–ª–∏—Ü—É troyka.users
phone VARCHAR(20) NULL  -- –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ)
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç:

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è:
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- ‚úÖ –¢–µ–ª–µ—Ñ–æ–Ω –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –ø—Ä–æ—Ñ–∏–ª–µ —Å –∏–∫–æ–Ω–∫–æ–π üìû
- ‚úÖ –ü–æ–ª–µ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ - —Å—Ç–∞—Ä—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –ø–æ—Å—Ç—Ä–∞–¥–∞—é—Ç
- ‚úÖ API –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–æ–ª–µ —Ç–µ–ª–µ—Ñ–æ–Ω–∞
